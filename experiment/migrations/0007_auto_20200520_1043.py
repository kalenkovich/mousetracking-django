# Generated by Django 2.2.12 on 2020-05-20 07:43

from django.db import migrations


def update_images_and_audio(apps, schema_editor):
    # Here we add more objects and sentences.

    # We've also moved them to 'audio' and 'objects' folders, so we'll have to delete the current ones first.
    # Before that, we will have to delete the test trial and its results because the test trial references the current
    # Image and Audio objects.
    TrialResults = apps.get_model('experiment', 'TrialResults')
    TrialResults.objects.all().delete()
    Trial = apps.get_model('experiment', 'Trial')
    Trial.objects.all().delete()

    Image = apps.get_model('experiment', 'Image')
    Image.objects.all().delete()
    Audio = apps.get_model('experiment', 'Audio')
    Audio.objects.all().delete()

    for name in 'acorn, axe, flask, medal'.split(', '):
        Image.objects.create(name=name, uri=f'experiment/objects/{name}.png')

    for name in ('in-this-picture_left_negative',
                 'this-time_negative_right',
                 'this-time_negative_top',
                 'this-time_positive_bottom',
                 'this-time_top_negative'):
        Audio.objects.create(name=name, uri=f'experiment/audio/{name}.wav')


class Migration(migrations.Migration):

    dependencies = [
        ('experiment', '0006_auto_20200520_0836'),
    ]

    operations = [
        migrations.RunPython(update_images_and_audio),
    ]
